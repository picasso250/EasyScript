# EasyScript 内置函数参考手册

本文档详细介绍了 EasyScript 中所有可用的内置函数。

---

### `print(...)`

打印一个或多个值到控制台。

- **签名**: `print(value1, value2, ...)`
- **参数**: 任意数量、任意类型的值。
- **返回值**: `nil`
- **描述**:
  - `print` 会将其所有参数的字符串表示形式打印到标准输出，每个参数之间用一个空格分隔。
  - 打印完成后，会自动输出一个换行符。
  - 如果不提供任何参数，`print()` 只会输出一个换行符。

- **示例**:
  ```easyscript
  print("Hello", 123, true); // 输出: Hello 123 true
  print();                     // 输出: (一个空行)
  ```

---

### `len(value)`

返回一个对象的“长度”。

- **签名**: `len(value)`
- **参数**:
  - `value`: 一个字符串、列表或映射。
- **返回值**:
  - 如果 `value` 是**字符串**，返回其**字符**数量（不是字节数）。
  - 如果 `value` 是**列表**，返回其元素个数。
  - 如果 `value` 是**映射**，返回其键值对数量。
  - 如果 `value` 是其他类型，会抛出运行时错误。
- **示例**:
  ```easyscript
  len("你好");      // 返回 2
  len([1, 2, 3]); // 返回 3
  len({"a":1});  // 返回 1
  ```

---

### `type(value)`

返回一个值的类型的字符串表示。

- **签名**: `type(value)`
- **参数**:
  - `value`: 任意类型的值。
- **返回值**: 一个描述该值类型的字符串。可能的返回值包括:
  - `"nil"`
  - `"boolean"`
  - `"number"`
  - `"string"`
  - `"list"`
  - `"map"`
  - `"function"`
- **示例**:
  ```easyscript
  type(123);      // 返回 "number"
  type([1]);      // 返回 "list"
  type(fun(){}); // 返回 "function"
  ```

---

### `bool(value)`

将一个值转换为布尔值 (`true` 或 `false`)。

- **签名**: `bool(value)`
- **参数**:
  - `value`: 任意类型的值。
- **返回值**: `true` 或 `false`。
- **描述**: EasyScript 遵循统一的真值规则。以下值被转换为 `false` (falsy)：
    - `nil`
    - `false` (布尔值)
    - 数字 `0`
    - 空字符串 `""`
    - 空列表 `[]`
    - 空映射 `{}`
  除上述值之外的所有其他值都被转换为 `true` (truthy)。
- **示例**:
  ```easyscript
  bool(0);    // 返回 false
  bool([]);   // 返回 false
  bool("a");  // 返回 true
  ```

---

### `str(value)`

将一个值转换为其字符串表示。

- **签名**: `str(value)`
- **参数**:
  - `value`: 任意类型的值。
- **返回值**: 该值的字符串表示。
- **示例**:
  ```easyscript
  str(123);      // 返回 "123"
  str([1, 2]);   // 返回 "[1, 2]"
  ```

---

### `num(value)`

将一个值转换为数字。

- **签名**: `num(value)`
- **参数**:
  - `value`: 一个数字、字符串、布尔值或 `nil`。
- **返回值**:
  - 转换成功后的数字。
  - 如果转换失败（例如，`num("abc")`）或输入了不支持的类型（如列表、映射），则返回 `nil`。
- **转换规则**:
  - **数字**: 原样返回。
  - **字符串**: 尝试解析为浮点数（会忽略前后的空白符）。失败则返回 `nil`。
  - **布尔值**: `true` 返回 `1`，`false` 返回 `0`。
  - **nil**: 返回 `0`。
- **示例**:
  ```easyscript
  num("  -45.5  "); // 返回 -45.5
  num(true);         // 返回 1
  num("test");       // 返回 nil
  ```

---

### `input([prompt])`

从标准输入读取一行文本。

- **签名**: `input()` 或 `input(prompt)`
- **参数**:
  - `prompt` (可选): 一个字符串，将在读取输入前显示给用户。
- **返回值**: 用户输入的字符串（不包含末尾的换行符）。
- **注意**: 在自动化测试环境中，此函数可能会导致测试挂起，因为它需要真实的用户交互。
- **示例**:
  ```easyscript
  let name = input("Enter your name: ");
  print("Hello, " + name);
  ```

---

### `keys(map)`

返回一个映射的所有键（key）组成的列表。

- **签名**: `keys(map)`
- **参数**:
  - `map`: 一个映射。
- **返回值**:
  - 一个包含该映射所有键的新列表。
  - 如果参数不是映射，会抛出运行时错误。
- **注意**: 返回的列表中，键的顺序是不保证的。
- **示例**:
  ```easyscript
  let my_map = {"a": 1, "b": 2};
  let k = keys(my_map);
  // k 可能是 ["a", "b"] 或 ["b", "a"]
  ```

---

### `values(map)`

返回一个映射的所有值（value）组成的列表。

- **签名**: `values(map)`
- **参数**:
  - `map`: 一个映射。
- **返回值**:
  - 一个包含该映射所有值的新列表。
  - 如果参数不是映射，会抛出运行时错误。
- **注意**: 返回的列表中，值的顺序是不保证的，但通常与 `keys()` 函数返回的键的顺序相对应。
- **示例**:
  ```easyscript
  let my_map = {"a": 1, "b": 2};
  let v = values(my_map);
  // v 可能是 [1, 2] 或 [2, 1]
  ```
