# EasyScript 脚本语言：设计与哲学

## 简介

**EasyScript** 是一种为追求极致**简洁**、**易学**和**结构清晰**而设计的脚本语言。在新版本中，它完全采纳了 **“一切皆表达式” (Everything is an Expression)** 的设计哲学，具备现代编程所需的所有核心功能，但通过消除“语句”和“表达式”之间的概念鸿沟，将语言的**语义统一性**提升到极致。

**EasyScript** 的目标是成为初学者的完美**基石**语言，让学习者能专注于算法逻辑和数据流，而非记忆复杂的语法和优先级规则。

## 核心设计哲学：一切皆表达式 (Everything is an Expression)

EasyScript 的设计围绕两大核心原则：

### 1. 极致的语义统一性 (Expression-Oriented)

*   **无语句 (No Statements)：** 语言中**没有 `Statement` 概念**。`if` 结构、`for` 结构、`函数定义`，甚至**赋值**，全部都是表达式 (`Expression`)。
*   **隐式返回 (Implicit Return)：** 函数体 (`BlockExpression`) 的返回值由其内部**最后一个表达式**的值决定。显式的 `return` 关键字已被移除。
*   **副作用标记：** 表达式后加上分号 `;` 表示这是一个带有**副作用** (如赋值、打印) 的表达式，它的返回值会被忽略，并隐式返回 **`nil`**。

### 2. 结构化与空值哲学

*   **空值哲学 (`nil`)：** 引入一个统一的 **`nil`** 值。
    *   `nil` 用于表示变量未赋值、字典查找失败。
    *   `nil` **同时承担了 `unit/void` 的语义**，作为所有带有副作用的表达式（如 `a = 1;`）或缺少返回值分支的表达式（如无 `else` 的 `if`）的返回值。
*   **Go-Style 控制流：** `if` 和 `for` 语句的条件表达式**无需使用圆括号**。
*   **强制表达式块：** `if`, `for`, `fun` 的代码体**必须**是表达式块 `{}` ($\langle \text{BlockExpression} \rangle$)，保证了结构清晰和返回值的一致性。

## 语言核心特性速览

### 控制流 (全部是 Expression)

| 特性 | 示例 (Expression-Style) | 描述 |
| :--- | :--- | :--- |
| **函数定义** | `myFunc = fun(x) { x * x }` | `fun` 定义的表达式返回一个可执行的函数对象。函数体的最后一个表达式作为返回值。 |
| **赋值** | `myVar = 10;` 或 `myDict["key"] = 1;` | 赋值现在是表达式，**返回 `nil`**。常以分号 `;` 结尾以表示其主要目的是副作用。 |
| **条件分支** | `result = if a > 10 { 1 } else { 0 };` | `if` 是表达式，返回分支代码块的值。如果无 `else` 且条件不满足，**返回 `nil`**。 |
| **列表转换循环** | `b = for x in a { x + 1 };` | **For Expression** 专用于集合转换（即 `map` 操作）。它遍历集合，收集循环体内最后一个表达式的值，**返回一个新的列表**。 |
| **副作用循环** | `for item in range(0, 10) { sum = sum + item; };` | 如果 `for` 循环的返回值被忽略或赋值给一个变量，它主要用于执行副作用。 |

### 数据结构

| 特性 | 实现方式 |
| :--- | :--- |
| **空值** | 唯一的 **`nil`** 值，用于表示空值和无意义的返回值 (Unit/Void)。|
| **列表 (List)** | 支持使用字面量 `[1, a+b, true]` 构造。 |
| **字典 (Dict/Map)** | 支持使用键值对字面量 `{"key": 1, 2: "b"}` 构造。 |
| **高优先级索引** | 列表和字典的索引操作 `[ ]` 具有最高的优先级，可用于任何表达式结果。 |

## 总结

**EasyScript** 的新设计证明了**极简**、**功能强大**和**语义优雅**可以完美共存。通过将整个语言统一到“表达式”的概念下，我们创建了一个语法更简洁、语义更统一、且完全具备执行任何算法能力的脚本语言。它是学习函数式编程思想和语言设计理念的理想选择。